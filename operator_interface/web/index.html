<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSS Operator Interface</title>
    <link rel="stylesheet" href="style.css?v=<?php echo time(); ?>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>
<body>
    <div class="main-container">
        <!-- G√≥rny pasek statusu -->
        <div class="status-bar-container">
            <div id="connection-status" class="status-indicator status-off">ROZ≈ÅƒÑCZONO</div>
            <div id="autopilot-status" class="status-indicator status-off">AUTOPILOT WY≈ÅƒÑCZONY</div>
            <button id="toggle-autopilot-btn" class="btn-engage" disabled>AKTYWUJ</button>
        </div>

        <!-- Zak≈Çadki -->
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'TabMain')">G≈Ç√≥wny</button>
            <button class="tab-button" onclick="openTab(event, 'TabController')">Regulator</button>
            <button class="tab-button" onclick="openTab(event, 'TabControl')">Control</button>
            <button class="tab-button" onclick="openTab(event, 'TabDetails')">Szczeg√≥≈Çy</button>
            <button class="tab-button" onclick="openTab(event, 'TabSystem')">System</button>
            <button class="tab-button" onclick="openTab(event, 'TabHealth')">Health</button>
        </div>

        <!-- Zak≈Çadka G≈Ç√≥wna -->
        <div id="TabMain" class="tab-content active">
            <div class="main-panel">
                <h2>Wizualizacja Wzglƒôdna</h2>
                <div id="viz-container">
                    <!-- Sieczkarnia -->
                    <div id="chopper" class="vehicle-symbol" title="Sieczkarnia">
                        <div class="vehicle-icon">
                            <img src="icons/chopper.svg" alt="Sieczkarnia" class="vehicle-svg" />
                        </div>
                    </div>
                    
                    <!-- CiƒÖgnik z przyczepƒÖ -->
                    <div id="tractor" class="vehicle-symbol" title="CiƒÖgnik">
                        <div class="vehicle-icon">
                            <img src="icons/tractor_trailer.svg" alt="CiƒÖgnik" class="vehicle-svg" />
                        </div>
                    </div>
                    
                    <!-- Pola prƒôdko≈õci -->
                    <div id="chopper-speed" class="speed-display">0.00 km/h</div>
                    <div id="tractor-speed" class="speed-display">0.00 km/h</div>
                    
                    <!-- Punkty referencyjne -->
                    <div id="chopper-ref-point" class="reference-point chopper-ref" title="Punkt referencyjny sieczkarni (rura)"></div>
                    <div id="tractor-ref-point" class="reference-point tractor-ref" title="Punkt referencyjny ciƒÖgnika (≈õrodek przyczepy)"></div>
                </div>
            </div>
            <div class="data-panel">
                <h3>Kluczowe Dane</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <span class="data-label">Lat dist:</span>
                        <span class="data-value" id="dist_long_main">---</span>
                        <span class="data-unit">m</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Lon dist:</span>
                        <span class="data-value" id="dist_lat_main">---</span>
                        <span class="data-unit">m</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Min dist:</span>
                        <span class="data-value" id="dist_straight_main">---</span>
                        <span class="data-unit">m</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Prƒôdko≈õƒá:</span>
                        <span class="data-value" id="tractor_speed_main">---</span>
                        <span class="data-unit">km/h</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Prƒôdko≈õƒá zadana:</span>
                        <span class="data-value" id="target_speed_main">---</span>
                        <span class="data-unit">km/h</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Bieg:</span>
                        <span class="data-value" id="current_gear_main">---</span>
                        <span class="data-unit">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zak≈Çadka Regulatora -->
        <div id="TabController" class="tab-content">
            <div class="controller-panel">
                <!-- NOWA SEKCJA: Ustawianie prƒôdko≈õci zadanej + Kontrola regulatora -->
                <div class="speed-control-section">
                    <h3>üéØ Regulator prƒôdko≈õci</h3>
                    <div class="speed-control-content-compact">
                        <!-- Kompaktowa kontrola regulatora prƒôdko≈õci -->
                        <div class="speed-controller-compact">
                            <div class="speed-controller-status">
                                <div class="status-led" id="speed-controller-led"></div>
                                <span class="status-text">Regulator Prƒôdko≈õci</span>
                            </div>
                            <button id="toggle-speed-controller-btn" class="btn-toggle btn-toggle-off">WY≈ÅƒÑCZONA</button>
                        </div>
                        
                        <div class="speed-input-compact">
                            <label for="target-speed-regulator">Prƒôdko≈õƒá zadana:</label>
                            <input type="number" id="target-speed-regulator" min="0" max="72" step="0.1" value="7.0">
                            <span class="unit-large">km/h</span>
                            <button id="set-speed-regulator-btn" class="btn-control-large">Ustaw</button>
                        </div>
                    </div>
                </div>
                
                <div class="chart-header">
                    <h2>Wykres Pracy Regulatora Prƒôdko≈õci</h2>
                    <button id="settings-btn" class="btn-settings">‚öôÔ∏è Nastawy Prƒôdko≈õci</button>
                </div>
                
                <div class="chart-container">
                    <canvas id="controller-chart"></canvas>
                </div>
                
                <!-- NOWA SEKCJA: Regulator Pozycji (Autopilot) -->
                <div class="position-control-section">
                    <h3>üéØ Regulator Pozycji (Autopilot)</h3>
                    <div class="position-control-content-inline">
                        <!-- Pole 1: Kontrola autopilota -->
                        <div class="position-field">
                            <div class="position-field-header">
                                <div class="status-led" id="position-controller-led"></div>
                                <span class="field-title">Autopilot</span>
                            </div>
                            <button id="toggle-position-controller-btn" class="btn-toggle btn-toggle-off">WY≈ÅƒÑCZONY</button>
                        </div>
                        
                        <!-- Pole 2: Pozycja zadana -->
                        <div class="position-field">
                            <div class="position-field-header">
                                <span class="field-title">Pozycja zadana</span>
                            </div>
                            <div class="position-input-container">
                                <input type="number" id="target-position-regulator" min="-5" max="5" step="0.1" value="0.0">
                                <span class="unit-large">m</span>
                                <button id="set-position-regulator-btn" class="btn-control-large">Ustaw Pozycjƒô</button>
                            </div>
                        </div>
                        
                        <!-- Pole 3: Aktualna pozycja -->
                        <div class="position-field">
                            <div class="position-field-header">
                                <span class="field-title">Aktualna odleg≈Ço≈õƒá</span>
                            </div>
                            <div class="current-position-value" id="current_distance_longitudinal">--- m</div>
                        </div>
                    </div>
                </div>
                
                <!-- NOWY WYKRES: Regulator Pozycji -->
                <div class="chart-header">
                    <h2>Wykres Pracy Regulatora Pozycji</h2>
                    <button id="position-settings-btn" class="btn-settings">‚öôÔ∏è Nastawy Pozycji</button>
                </div>
                
                <div class="chart-container">
                    <canvas id="position-controller-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Zak≈Çadka Control -->
        <div id="TabControl" class="tab-content">
            <div class="control-grid">
                <!-- Kontrola Bieg√≥w -->
                <div class="control-section">
                    <h3>‚öôÔ∏è Kontrola Bieg√≥w</h3>
                    <div class="control-content">
                        <div class="control-group">
                            <label>Status Gear Manager:</label>
                            <div class="status-display" id="gear-manager-status">Nieaktywny</div>
                        </div>
                        <div class="control-group">
                            <label>Automatyczne ZarzƒÖdzanie:</label>
                            <div class="toggle-group">
                                <button id="toggle-gear-manager-btn" class="btn-toggle btn-toggle-off">WY≈ÅƒÑCZONE</button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Rƒôczna Zmiana Bieg√≥w:</label>
                            <div class="gear-controls">
                                <button id="gear-up-btn" class="btn-gear btn-gear-up">‚¨ÜÔ∏è Bieg W G√ìRƒò</button>
                                <button id="gear-down-btn" class="btn-gear btn-gear-down">‚¨áÔ∏è Bieg W D√ì≈Å</button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Aktualny P√≥≈Çbieg:</label>
                            <div class="gear-display" id="current-gear-display">---</div>
                        </div>
                    </div>
                </div>

                <!-- NOWA SEKCJA: Rƒôczne Sterowanie Serwem -->
                <div class="control-section">
                    <h3>üéÆ Rƒôczne Sterowanie Serwem</h3>
                    <div class="control-content">
                        <div class="control-group">
                            <label>Status Serwa:</label>
                            <div class="status-display" id="servo-status-display">Nieznany</div>
                        </div>
                        <div class="control-group">
                            <label>Tryb Sterowania Serwa:</label>
                            <div class="toggle-group">
                                <button id="toggle-servo-mode-btn" class="btn-toggle btn-toggle-off">AUTOMATYCZNY</button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Pozycja Docelowa:</label>
                            <div class="servo-input-group">
                                <input type="number" id="servo-target-input" min="0" max="180" step="1" value="90" disabled>
                                <span class="unit">¬∞</span>
                                <button id="set-servo-btn" class="btn-control" disabled>Ustaw Pozycjƒô</button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Aktualna Pozycja:</label>
                            <div class="servo-position-display" id="servo-position-display">---¬∞</div>
                        </div>
                        <div class="control-group">
                            <label>Szybkie Pozycje:</label>
                            <div class="servo-quick-controls">
                                <button id="servo-left-btn" class="btn-servo-quick" disabled>‚¨ÖÔ∏è Lewo (0¬∞)</button>
                                <button id="servo-center-btn" class="btn-servo-quick" disabled>‚¨ÜÔ∏è ≈örodek (90¬∞)</button>
                                <button id="servo-right-btn" class="btn-servo-quick" disabled>‚û°Ô∏è Prawo (180¬∞)</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status Systemu -->
                <div class="control-section">
                    <h3>üìä Status Systemu</h3>
                    <div class="control-content">
                        <div class="control-group">
                            <label>Po≈ÇƒÖczenie ROS:</label>
                            <div class="status-indicator-small" id="ros-status-indicator">Roz≈ÇƒÖczono</div>
                        </div>
                        <div class="control-group">
                            <label>Ostatnia Komenda:</label>
                            <div class="last-command" id="last-command">Brak</div>
                        </div>
                        <div class="control-group">
                            <label>Status Serwa:</label>
                            <div class="status-indicator-small" id="servo-status-indicator">Nieznany</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zak≈Çadka Szczeg√≥≈Ç√≥w -->
        <div id="TabDetails" class="tab-content">
            <div class="details-grid">
                <!-- Status Systemu -->
                <div class="detail-section">
                    <h3>üîß Status Systemu</h3>
                    <div class="detail-content">
                        <div class="detail-item">
                            <span class="detail-label">Po≈ÇƒÖczenie BT:</span>
                            <span class="detail-value" id="bt_status">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">RTK CiƒÖgnika:</span>
                            <span class="detail-value" id="tractor_rtk">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">RTK Sieczkarni:</span>
                            <span class="detail-value" id="chopper_rtk">---</span>
                        </div>
                    </div>
                </div>

                <!-- CiƒÖgnik -->
                <div class="detail-section">
                    <h3>üöú CiƒÖgnik</h3>
                    <div class="detail-content">
                        <div class="detail-item">
                            <span class="detail-label">Prƒôdko≈õƒá:</span>
                            <span class="detail-value" id="tractor_speed_details">---</span>
                            <span class="detail-unit">km/h</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Prƒôdko≈õƒá zadana:</span>
                            <span class="detail-value" id="target_speed">---</span>
                            <span class="detail-unit">km/h</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">P√≥≈Çbieg:</span>
                            <span class="detail-value" id="gear">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Sprzƒôg≈Ço:</span>
                            <span class="detail-value" id="clutch">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Pozycja serwa:</span>
                            <span class="detail-value" id="servo_pos">---</span>
                            <span class="detail-unit">¬∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Szeroko≈õƒá geograficzna:</span>
                            <span class="detail-value" id="tractor_lat">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">D≈Çugo≈õƒá geograficzna:</span>
                            <span class="detail-value" id="tractor_lon">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Wysoko≈õƒá:</span>
                            <span class="detail-value" id="tractor_alt">---</span>
                            <span class="detail-unit">m</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Kurs:</span>
                            <span class="detail-value" id="tractor_heading">---</span>
                            <span class="detail-unit">¬∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Czas GPS:</span>
                            <span class="detail-value" id="tractor_gps_time">---</span>
                        </div>
                    </div>
                </div>

                <!-- Sieczkarnia -->
                <div class="detail-section">
                    <h3>üåæ Sieczkarnia</h3>
                    <div class="detail-content">
                        <div class="detail-item">
                            <span class="detail-label">Prƒôdko≈õƒá:</span>
                            <span class="detail-value" id="chopper_speed">---</span>
                            <span class="detail-unit">km/h</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Szeroko≈õƒá geograficzna:</span>
                            <span class="detail-value" id="chopper_lat">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">D≈Çugo≈õƒá geograficzna:</span>
                            <span class="detail-value" id="chopper_lon">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Wysoko≈õƒá:</span>
                            <span class="detail-value" id="chopper_alt">---</span>
                            <span class="detail-unit">m</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Kurs:</span>
                            <span class="detail-value" id="chopper_heading">---</span>
                            <span class="detail-unit">¬∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Czas GPS:</span>
                            <span class="detail-value" id="chopper_gps_time">---</span>
                        </div>
                    </div>
                </div>

                <!-- Pozycja Wzglƒôdna -->
                <div class="detail-section">
                    <h3>üìç Pozycja Wzglƒôdna</h3>
                    <div class="detail-content">
                        <div class="detail-item">
                            <span class="detail-label">Wzd≈Çu≈ºna:</span>
                            <span class="detail-value" id="dist_long">---</span>
                            <span class="detail-unit">m</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Poprzeczna:</span>
                            <span class="detail-value" id="dist_lat">---</span>
                            <span class="detail-unit">m</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Prosta:</span>
                            <span class="detail-value" id="dist_straight">---</span>
                            <span class="detail-unit">m</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- NOWA ZAK≈ÅADKA: System -->
        <div id="TabSystem" class="tab-content">
            <!-- Dashboard Systemu -->
            <div class="system-dashboard">
                <!-- Karty metryk systemowych -->
                <div class="metrics-grid">
                    <div class="metric-card cpu-card">
                        <div class="metric-icon">üñ•Ô∏è</div>
                        <div class="metric-content">
                            <div class="metric-value" id="system_cpu">---</div>
                            <div class="metric-label">CPU</div>
                            <div class="metric-unit">%</div>
                        </div>
                    </div>
                    
                    <div class="metric-card memory-card">
                        <div class="metric-icon">üíæ</div>
                        <div class="metric-content">
                            <div class="metric-value" id="system_ram">---</div>
                            <div class="metric-label">RAM</div>
                            <div class="metric-unit">%</div>
                        </div>
                    </div>
                    
                    <div class="metric-card temp-card">
                        <div class="metric-icon">üå°Ô∏è</div>
                        <div class="metric-content">
                            <div class="metric-value" id="system_temp">---</div>
                            <div class="metric-label">Temperatura</div>
                            <div class="metric-unit">¬∞C</div>
                        </div>
                    </div>
                    
                    <div class="metric-card disk-card">
                        <div class="metric-icon">üíø</div>
                        <div class="metric-content">
                            <div class="metric-value" id="system_disk">---</div>
                            <div class="metric-label">Dysk</div>
                            <div class="metric-unit">%</div>
                        </div>
                    </div>
                </div>
                
                <!-- Szczeg√≥≈Çowe informacje systemowe -->
                <div class="system-details-grid">
                    <div class="system-info-card">
                        <div class="card-header">
                            <h3>üïê Informacje o Systemie</h3>
                        </div>
                        <div class="card-content">
                            <div class="info-item">
                                <span class="info-label">Uptime:</span>
                                <span class="info-value" id="system_uptime">---</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Wersja ROS:</span>
                                <span class="info-value" id="ros_version">---</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Architektura:</span>
                                <span class="info-value" id="system_arch">---</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Model RPi:</span>
                                <span class="info-value" id="rpi_model">---</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="system-status-card">
                        <div class="card-header">
                            <h3>üîå Status Komponent√≥w</h3>
                        </div>
                        <div class="card-content">
                            <div class="status-item">
                                <span class="status-label">GPIO:</span>
                                <span class="status-value" id="system_gpio">---</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Sieƒá:</span>
                                <span class="status-value" id="system_network">---</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">USB/Serial:</span>
                                <span class="status-value" id="system_usb_serial">---</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">ROS Bridge:</span>
                                <span class="status-value" id="ros_bridge_status">---</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Wykresy systemowe -->
                <div class="system-charts">
                    <!-- Usuniƒôto wykres wydajno≈õci systemu -->
                </div>
            </div>
        </div>

        <!-- NOWA ZAK≈ÅADKA: Health -->
        <div id="TabHealth" class="tab-content">
            <div class="health-dashboard">
                <!-- Karty statusu systemu -->
                <div class="health-overview-grid">
                    <div class="health-summary-card">
                        <div class="summary-header">
                            <h3>üè• Status Systemu MSS</h3>
                            <div class="summary-indicator" id="overall_health_indicator">
                                <span class="indicator-dot"></span>
                                <span class="indicator-text">Sprawdzanie...</span>
                            </div>
                        </div>
                        <div class="summary-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="active_nodes_count">0</div>
                                <div class="stat-label">Wƒôz≈Çy Aktywne</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="error_nodes_count">0</div>
                                <div class="stat-label">B≈Çƒôdy</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="warning_nodes_count">0</div>
                                <div class="stat-label">Ostrze≈ºenia</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="health-alerts-card">
                        <div class="card-header">
                            <h3>‚ö†Ô∏è Ostatnie Alerty</h3>
                            <button class="clear-alerts-btn">Wyczy≈õƒá</button>
                        </div>
                        <div class="alerts-list" id="alerts_list">
                            <div class="no-alerts">Brak aktywnych alert√≥w</div>
                        </div>
                        <div class="alerts-summary">
                            <span>Liczba alert√≥w: <strong id="alerts_count">0</strong></span>
                        </div>
                    </div>
                </div>
                
                <!-- Status wƒôz≈Ç√≥w w formie kart -->
                <div class="nodes-status-grid">
                    <h3>üîç Status Wƒôz≈Ç√≥w ROS</h3>
                    <div class="nodes-grid">
                        <div class="node-card" data-node="gps_rtk_node">
                            <div class="node-info">
                                <div class="node-name">GPS RTK</div>
                                <div class="node-status" id="node_gps_rtk">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="bt_receiver_node">
                            <div class="node-info">
                                <div class="node-name">BT Receiver</div>
                                <div class="node-status" id="node_bt_receiver">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="gear_reader_node">
                            <div class="node-info">
                                <div class="node-name">Gear Reader</div>
                                <div class="node-status" id="node_gear_reader">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="servo_controller">
                            <div class="node-info">
                                <div class="node-name">Servo Controller</div>
                                <div class="node-status" id="node_servo_controller">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="gear_shifter">
                            <div class="node-info">
                                <div class="node-name">Gear Shifter</div>
                                <div class="node-status" id="node_gear_shifter">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="speed_filter_node">
                            <div class="node-info">
                                <div class="node-name">Speed Filter</div>
                                <div class="node-status" id="node_speed_filter">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="speed_controller_node">
                            <div class="node-info">
                                <div class="node-name">Speed Controller</div>
                                <div class="node-status" id="node_speed_controller">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="relative_computer_node">
                            <div class="node-info">
                                <div class="node-name">Relative Computer</div>
                                <div class="node-status" id="node_relative_computer">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="gear_manager_node">
                            <div class="node-info">
                                <div class="node-name">Gear Manager</div>
                                <div class="node-status" id="node_gear_manager">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="diagnostics_node">
                            <div class="node-info">
                                <div class="node-name">Diagnostics</div>
                                <div class="node-status" id="node_diagnostics">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="system_monitor">
                            <div class="node-info">
                                <div class="node-name">System Monitor</div>
                                <div class="node-status" id="node_system_monitor">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                        
                        <div class="node-card" data-node="mss_health_monitor_node">
                            <div class="node-info">
                                <div class="node-name">Health Monitor</div>
                                <div class="node-status" id="node_mss_health_monitor">---</div>
                            </div>
                            <div class="node-health-indicator"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Konsola log√≥w -->
                <div class="logs-console-section">
                    <div class="console-header">
                        <h3>üìù Konsola Log√≥w Systemu</h3>
                        <div class="console-controls">
                            <button class="console-btn" id="clear-logs-btn">Wyczy≈õƒá</button>
                            <button class="console-btn" id="export-logs-btn">Eksportuj</button>
                            <select id="log-level-filter">
                                <option value="all">Wszystkie poziomy</option>
                                <option value="info">Info</option>
                                <option value="warning">Warning</option>
                                <option value="error">Error</option>
                            </select>
                        </div>
                    </div>
                    <div class="console-container">
                        <div class="console-output" id="console_output">
                            <div class="console-line">
                                <span class="log-timestamp">[System]</span>
                                <span class="log-message">Konsola log√≥w gotowa...</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Wykresy health -->
                <div class="health-charts">
                    <!-- Usuniƒôto wykres statusu wƒôz≈Ç√≥w -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal z nastawami regulatora prƒôdko≈õci -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è Nastawy Regulatora Prƒôdko≈õci PI</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-group">
                    <label for="kp-slider">Kp (Wzmocnienie): <span id="kp-value">10.0</span></label>
                    <input type="range" id="kp-slider" min="0" max="100" value="10" step="0.5">
                </div>
                <div class="settings-group">
                    <label for="ki-slider">Ki (Ca≈Çka): <span id="ki-value">20.0</span></label>
                    <input type="range" id="ki-slider" min="0" max="100" value="20" step="0.5">
                </div>
                <div class="settings-group">
                    <label for="kd-slider">Kd (R√≥≈ºniczka): <span id="kd-value">0.0</span></label>
                    <input type="range" id="kd-slider" min="0" max="100" value="0" step="0.5">
                </div>
                <button id="apply-pid-btn" class="btn-apply">Zastosuj Parametry</button>
            </div>
        </div>
    </div>

    <!-- Modal z nastawami regulatora pozycji -->
    <div id="position-settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è Nastawy Regulatora Pozycji PI</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-group">
                    <label for="position-kp-slider">Kp (Wzmocnienie): <span id="position-kp-value">1.0</span></label>
                    <input type="range" id="position-kp-slider" min="0" max="10" value="1" step="0.1">
                </div>
                <div class="settings-group">
                    <label for="position-ki-slider">Ki (Ca≈Çka): <span id="position-ki-value">0.1</span></label>
                    <input type="range" id="position-ki-slider" min="0" max="2" value="0.1" step="0.01">
                </div>
                <div class="settings-group">
                    <label for="position-tolerance-slider">Tolerancja pozycji: <span id="position-tolerance-value">0.5</span> m</label>
                    <input type="range" id="position-tolerance-slider" min="0.1" max="2.0" value="0.5" step="0.1">
                </div>
                <div class="settings-group">
                    <label for="speed-tolerance-slider">Tolerancja prƒôdko≈õci: <span id="speed-tolerance-value">1.0</span> km/h</label>
                    <input type="range" id="speed-tolerance-slider" min="0.1" max="3.6" value="1.0" step="0.1">
                </div>
                <button id="apply-position-pid-btn" class="btn-apply">Zastosuj Parametry</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
    <script src="main.js"></script>
</body>
</html>
